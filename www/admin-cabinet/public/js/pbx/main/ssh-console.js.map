{"version":3,"sources":["../../src/main/ssh-console.js"],"names":["sshConsole","$menuLink","$","link","target","hide","initialize","on","e","preventDefault","window","open","isChrome","test","navigator","userAgent","vendor","match","isSafari","indexOf","detect","location","hostname","globalSSHPort","base","ifInstalled","ifNotInstalled","get","done","fail","document","ready"],"mappings":";;AAAA;;;;;;;;AAQA;AAEA,IAAMA,UAAU,GAAG;AAClBC,EAAAA,SAAS,EAAEC,CAAC,CAAC,0CAAD,CADM;AAElBC,EAAAA,IAAI,EAAE,IAFY;AAGlBC,EAAAA,MAAM,EAAE,IAHU;AAIlBC,EAAAA,IAAI,EAAE,KAJY;AAKlBC,EAAAA,UALkB;AAAA,0BAKL;AACZN,MAAAA,UAAU,CAACC,SAAX,CAAqBM,EAArB,CAAwB,OAAxB,EAAiC,UAACC,CAAD,EAAO;AACvCA,QAAAA,CAAC,CAACC,cAAF;AACAC,QAAAA,MAAM,CAACC,IAAP,CAAYX,UAAU,CAACG,IAAvB,EAA6BH,UAAU,CAACI,MAAxC;AACA,OAHD,EADY,CAMZ;;AACA,UAAMQ,QAAQ,GAAG,SAASC,IAAT,CAAcC,SAAS,CAACC,SAAxB,KAAsC,aAAaF,IAAb,CAAkBC,SAAS,CAACE,MAA5B,CAAtC,IAA6E,CAAEF,SAAS,CAACC,SAAV,CAAoBE,KAApB,CAA0B,aAA1B,CAAhG;AACA,UAAMC,QAAQ,GAAGJ,SAAS,CAACE,MAAV,IAAoBF,SAAS,CAACE,MAAV,CAAiBG,OAAjB,CAAyB,OAAzB,IAAoC,CAAC,CAAzD,IAA8DL,SAAS,CAACC,SAAxE,IAAqF,CAACD,SAAS,CAACC,SAAV,CAAoBE,KAApB,CAA0B,OAA1B,CAAvG;;AACA,UAAIL,QAAJ,EAAc;AACbZ,QAAAA,UAAU,CAACoB,MAAX,CACC,qDADD,EAEC,YAAM;AACLpB,UAAAA,UAAU,CAACG,IAAX,sFAA8FO,MAAM,CAACW,QAAP,CAAgBC,QAA9G,cAA0HC,aAA1H;AACAvB,UAAAA,UAAU,CAACI,MAAX,GAAoB,QAApB;AACA,SALF,EAMC,YAAM;AACLJ,UAAAA,UAAU,CAACG,IAAX,GAAkB,yFAAlB;AACAH,UAAAA,UAAU,CAACI,MAAX,GAAoB,QAApB;AACA,SATF;AAWA,OAZD,MAYO,IAAIc,QAAJ,EAAc;AACpBlB,QAAAA,UAAU,CAACG,IAAX,wBAAgCO,MAAM,CAACW,QAAP,CAAgBC,QAAhD,cAA4DC,aAA5D;AACAvB,QAAAA,UAAU,CAACI,MAAX,GAAoB,MAApB;AACA,OAHM,MAGA;AACNJ,QAAAA,UAAU,CAACC,SAAX,CAAqBI,IAArB;AACA;AACD;;AAhCiB;AAAA;AAiClBe,EAAAA,MAjCkB;AAAA,oBAiCXI,IAjCW,EAiCLC,WAjCK,EAiCQC,cAjCR,EAiCwB;AACzCxB,MAAAA,CAAC,CAACyB,GAAF,WAASH,IAAT,uBACEI,IADF,CACOH,WADP,EAEEI,IAFF,CAEOH,cAFP;AAGA;;AArCiB;AAAA;AAAA,CAAnB;AAyCAxB,CAAC,CAAC4B,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAM;AACvB/B,EAAAA,UAAU,CAACM,UAAX;AACA,CAFD","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 7 2019\n *\n */\n\n/* global globalSSHPort */\n\nconst sshConsole = {\n\t$menuLink: $('a[href$=\"/admin-cabinet/console/index/\"]'),\n\tlink: null,\n\ttarget: null,\n\thide: false,\n\tinitialize() {\n\t\tsshConsole.$menuLink.on('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\twindow.open(sshConsole.link, sshConsole.target);\n\t\t});\n\n\t\t// Проверим возможность запуска SSH\n\t\tconst isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor) && !(navigator.userAgent.match(/Opera|OPR\\//));\n\t\tconst isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 && navigator.userAgent && !navigator.userAgent.match('CriOS');\n\t\tif (isChrome) {\n\t\t\tsshConsole.detect(\n\t\t\t\t'chrome-extension://pnhechapfaindjhompbnflcldabbghjo',\n\t\t\t\t() => {\n\t\t\t\t\tsshConsole.link = `chrome-extension://pnhechapfaindjhompbnflcldabbghjo/html/nassh.html#root@${window.location.hostname}:${globalSSHPort}`;\n\t\t\t\t\tsshConsole.target = '_blank';\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tsshConsole.link = 'https://chrome.google.com/webstore/detail/secure-shell/pnhechapfaindjhompbnflcldabbghjo';\n\t\t\t\t\tsshConsole.target = '_blank';\n\t\t\t\t},\n\t\t\t);\n\t\t} else if (isSafari) {\n\t\t\tsshConsole.link = `ssh://root@${window.location.hostname}:${globalSSHPort}`;\n\t\t\tsshConsole.target = '_top';\n\t\t} else {\n\t\t\tsshConsole.$menuLink.hide();\n\t\t}\n\t},\n\tdetect(base, ifInstalled, ifNotInstalled) {\n\t\t$.get(`${base}/html/nassh.html`)\n\t\t\t.done(ifInstalled)\n\t\t\t.fail(ifNotInstalled);\n\t},\n};\n\n\n$(document).ready(() => {\n\tsshConsole.initialize();\n});\n"],"file":"ssh-console.js"}