{"version":3,"sources":["../../src/SoundFiles/sound-files-index.js"],"names":["IndexSoundPlayer","id","html5Audio","document","getElementById","$row","$","$pButton","find","$dButton","$slider","$spanDuration","removeEventListener","cbOnMetadataLoaded","cbTimeUpdate","unbind","on","e","preventDefault","play","window","location","target","attr","addEventListener","range","min","max","start","onChange","cbOnSliderChange","spanDuration","isFinite","duration","closest","date","Date","setSeconds","currentTime","toISOString","substr","text","newVal","meta","triggeredByUser","percent","rangePosition","Math","round","removeClass","addClass","paused","pause","soundFiles","$audioFilesList","$contentFrame","initialize","DataTable","lengthChange","paging","columns","orderable","searchable","order","initComplete","each","index","row","language","SemanticLocalization","dataTableLocalisation","dataTable","appendTo","toArray","Array","prototype","slice","apply","getElementsByTagName","forEach","audio","handleMediaError","fileName","remove","api","url","globalRootUrl","successTest","response","undefined","Object","keys","length","onSuccess","success","PbxApi","SystemRemoveAudioFile","before","message","error","code","MEDIA_ERR_ABORTED","console","log","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","html","globalTranslate","sf_FileNotFound","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 5 2018\n *\n */\n\n/* global globalTranslate, SemanticLocalization, PbxApi, globalRootUrl */\n\nclass IndexSoundPlayer {\n\tconstructor(id) {\n\t\tthis.id = id;\n\t\tthis.html5Audio = document.getElementById(`audio-player-${id}`);\n\t\tconst $row = $(`#${id}`);\n\t\tthis.$pButton = $row.find('i.play'); // play button\n\t\tthis.$dButton = $row.find('i.download'); // download button\n\t\tthis.$slider = $row.find('div.cdr-player');\n\t\tthis.$spanDuration = $row.find('span.cdr-duration');\n\t\tthis.html5Audio.removeEventListener('timeupdate', this.cbOnMetadataLoaded, false);\n\t\tthis.html5Audio.removeEventListener('loadedmetadata', this.cbTimeUpdate, false);\n\t\tthis.$pButton.unbind();\n\t\tthis.$dButton.unbind();\n\n\n\t\t// play button event listenter\n\t\tthis.$pButton.on('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.play();\n\t\t});\n\n\t\t// download button event listenter\n\t\tthis.$dButton.on('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\twindow.location = $(e.target).attr('data-value');\n\t\t});\n\n\t\tthis.html5Audio.addEventListener('loadedmetadata', this.cbOnMetadataLoaded, false);\n\n\t\t// timeupdate event listener\n\t\tthis.html5Audio.addEventListener('timeupdate', this.cbTimeUpdate, false);\n\n\t\tthis.$slider.range({\n\t\t\tmin: 0,\n\t\t\tmax: 100,\n\t\t\tstart: 0,\n\t\t\tonChange: this.cbOnSliderChange,\n\t\t\thtml5Audio: this.html5Audio,\n\t\t\tcbTimeUpdate: this.cbTimeUpdate,\n\t\t\tspanDuration: this.$spanDuration,\n\t\t});\n\t}\n\n\t/**\n\t * Обработчик подгрузки метаданных\n\t */\n\tcbOnMetadataLoaded() {\n\t\tif (isFinite(this.duration)) {\n\t\t\tconst $row = $(this).closest('tr');\n\t\t\tconst date = new Date(null);\n\t\t\tdate.setSeconds(this.currentTime); // specify value for SECONDS here\n\t\t\tconst currentTime = date.toISOString().substr(14, 5);\n\t\t\tdate.setSeconds(this.duration); // specify value for SECONDS here\n\t\t\tconst duration = date.toISOString().substr(14, 5);\n\t\t\t$row.find('span.cdr-duration').text(`${currentTime}/${duration}`);\n\t\t}\n\t}\n\n\t/**\n\t * Колбек на сдвиг слайдера проигрывателя\n\t * @param newVal\n\t * @param meta\n\t */\n\tcbOnSliderChange(newVal, meta) {\n\t\tif (meta.triggeredByUser && isFinite(this.html5Audio.duration)) {\n\t\t\tthis.html5Audio.removeEventListener('timeupdate', this.cbTimeUpdate, false);\n\t\t\tthis.html5Audio.currentTime = (this.html5Audio.duration * newVal) / 100;\n\t\t\tthis.html5Audio.addEventListener('timeupdate', this.cbTimeUpdate, false);\n\t\t}\n\t\tif (isFinite(this.html5Audio.duration)) {\n\t\t\tconst date = new Date(null);\n\t\t\tdate.setSeconds(this.html5Audio.currentTime); // specify value for SECONDS here\n\t\t\tconst currentTime = date.toISOString().substr(14, 5);\n\t\t\tdate.setSeconds(this.html5Audio.duration); // specify value for SECONDS here\n\t\t\tconst duration = date.toISOString().substr(14, 5);\n\t\t\tthis.spanDuration.text(`${currentTime}/${duration}`);\n\t\t}\n\t}\n\n\t/**\n\t * Колбек на изменение позиции проигрываемого файла из HTML5 аудиотега\n\t */\n\tcbTimeUpdate() {\n\t\tif (isFinite(this.duration)) {\n\t\t\tconst percent = this.currentTime / this.duration;\n\t\t\tconst rangePosition = Math.round((percent) * 100);\n\t\t\tconst $row = $(this).closest('tr');\n\t\t\t$row.find('div.cdr-player').range('set value', rangePosition);\n\t\t\tif (this.currentTime === this.duration) {\n\t\t\t\t$row.find('i.pause').removeClass('pause').addClass('play');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Запуск и остановка воспроизведения аудио файла\n\t * по клику на иконку Play\n\t */\n\tplay() {\n\t\t// start music\n\t\tif (this.html5Audio.paused && this.html5Audio.duration) {\n\t\t\tthis.html5Audio.play();\n\t\t\t// remove play, add pause\n\t\t\tthis.$pButton.removeClass('play').addClass('pause');\n\t\t} else { // pause music\n\t\t\tthis.html5Audio.pause();\n\t\t\t// remove pause, add play\n\t\t\tthis.$pButton.removeClass('pause').addClass('play');\n\t\t}\n\t}\n}\n\nconst soundFiles = {\n\t$audioFilesList: $('#sound-files-table'),\n\t$contentFrame: $('#content-frame'),\n\tinitialize() {\n\t\tsoundFiles.$audioFilesList.DataTable({\n\t\t\tlengthChange: false,\n\t\t\tpaging: false,\n\t\t\tcolumns: [\n\t\t\t\tnull,\n\t\t\t\t{orderable: false, searchable: false},\n\t\t\t\t{orderable: false, searchable: false},\n\t\t\t],\n\t\t\torder: [0, 'asc'],\n\t\t\tinitComplete() {\n\t\t\t\t$('.file-row').each((index, row) => {\n\t\t\t\t\tconst id = $(row).attr('id');\n\t\t\t\t\treturn new IndexSoundPlayer(id);\n\t\t\t\t});\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t});\n\t\tsoundFiles.dataTable = soundFiles.$audioFilesList.DataTable();\n\t\tsoundFiles.dataTable.on('draw', () => {\n\t\t\t$('.file-row').each((index, row) => {\n\t\t\t\tconst id = $(row).attr('id');\n\t\t\t\treturn new IndexSoundPlayer(id);\n\t\t\t});\n\t\t});\n\t\t$('#add-new-button').appendTo($('div.eight.column:eq(0)'));\n\t\tconst toArray = Array.prototype.slice;\n\t\ttoArray.apply(document.getElementsByTagName('audio')).forEach((audio) => {\n\t\t\taudio.addEventListener('error', soundFiles.handleMediaError);\n\t\t});\n\t\t$('body').on('click', 'a.delete', (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst fileName = $(e.target).closest('tr').attr('data-value');\n\t\t\tconst id = $(e.target).closest('tr').attr('id');\n\t\t\t$('.message.ajax').remove();\n\t\t\t$.api({\n\t\t\t\turl: `${globalRootUrl}sound-files/delete/${id}`,\n\t\t\t\ton: 'now',\n\t\t\t\tsuccessTest(response) {\n\t\t\t\t\t// test whether a JSON response is valid\n\t\t\t\t\treturn response !== undefined\n\t\t\t\t\t\t&& Object.keys(response).length > 0;\n\t\t\t\t},\n\t\t\t\tonSuccess(response) {\n\t\t\t\t\tif (response.success === true) {\n\t\t\t\t\t\tPbxApi.SystemRemoveAudioFile(fileName);\n\t\t\t\t\t\tsoundFiles.$audioFilesList.find(`tr[id=${id}]`).remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsoundFiles.$contentFrame.before(`<div class=\"ui error message ajax\">${response.message.error}</div>`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t},\n\thandleMediaError(e) {\n\t\tswitch (e.target.error.code) {\n\t\t\tcase e.target.error.MEDIA_ERR_ABORTED:\n\t\t\t\tconsole.log('You aborted the media playback.');\n\t\t\t\tbreak;\n\t\t\tcase e.target.error.MEDIA_ERR_NETWORK:\n\t\t\t\tconsole.log('A network error caused the media download to fail.');\n\t\t\t\tbreak;\n\t\t\tcase e.target.error.MEDIA_ERR_DECODE:\n\t\t\t\tconsole.log('The media playback was aborted due to a corruption problem or because the media used features your browser did not support.');\n\t\t\t\tbreak;\n\t\t\tcase e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:\n\t\t\t\tconsole.log('The media could not be loaded, either because the server or network failed or because the format is not supported.');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('An unknown media error occurred.');\n\t\t}\n\t\tconst $row = $(e.target).closest('tr');\n\t\t$row.addClass('negative');\n\t\t$row.find('td.player').html(globalTranslate.sf_FileNotFound);\n\t},\n};\n\n\n$(document).ready(() => {\n\tsoundFiles.initialize();\n});\n\n"],"file":"sound-files-index.js"}