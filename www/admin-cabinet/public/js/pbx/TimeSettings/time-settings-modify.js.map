{"version":3,"sources":["../../src/TimeSettings/time-settings-modify.js"],"names":["timeSettings","$number","$","$formObj","validateRules","CurrentDateTime","depends","identifier","rules","type","prompt","globalTranslate","cq_ValidateNameEmpty","initialize","dropdown","fullTextSearch","calendar","firstDayOfWeek","SemanticLocalization","calendarFirstDayOfWeek","ampm","text","calendarText","checkbox","onChange","toggleDisabledFieldClass","initializeForm","formattedDate","date","Date","parse","form","removeClass","addClass","cbBeforeSendForm","settings","result","data","cbAfterSendForm","PbxApi","UpdateDateTime","Form","url","globalRootUrl","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\n\n/* global globalRootUrl, globalTranslate, SemanticLocalization, Form, PbxApi */\n\nconst timeSettings = {\n\t$number: $('#extension'),\n\t$formObj: $('#time-settings-form'),\n\tvalidateRules: {\n\t\tCurrentDateTime: {\n\t\t\tdepends: 'PBXManualTimeSettings',\n\t\t\tidentifier: 'CurrentDateTime',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.cq_ValidateNameEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\t$('#PBXTimezone').dropdown({\n\t\t\tfullTextSearch: true,\n\t\t});\n\n\t\t$('#CalendarBlock').calendar({\n\t\t\tfirstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,\n\t\t\tampm: false,\n\t\t\ttext: SemanticLocalization.calendarText,\n\t\t});\n\n\t\t$('.checkbox').checkbox({\n\t\t\tonChange() {\n\t\t\t\ttimeSettings.toggleDisabledFieldClass();\n\t\t\t},\n\t\t});\n\t\ttimeSettings.initializeForm();\n\t\ttimeSettings.toggleDisabledFieldClass();\n\t},\n\tformattedDate() {\n\t\tconst date = Date.parse(timeSettings.$formObj.form('get value', 'CurrentDateTime'));\n\t\treturn date / 1000;\n\t},\n\ttoggleDisabledFieldClass() {\n\t\tif (timeSettings.$formObj.form('get value', 'PBXManualTimeSettings') === 'on') {\n\t\t\t$('#SetDateTimeBlock').removeClass('disabled');\n\t\t\t$('#SetNtpServerBlock').addClass('disabled');\n\t\t} else {\n\t\t\t$('#SetNtpServerBlock').removeClass('disabled');\n\t\t\t$('#SetDateTimeBlock').addClass('disabled');\n\t\t}\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = timeSettings.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm() {\n\t\tPbxApi.UpdateDateTime({date: timeSettings.formattedDate()});\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = timeSettings.$formObj;\n\t\tForm.url = `${globalRootUrl}time-settings/save`;\n\t\tForm.validateRules = timeSettings.validateRules;\n\t\tForm.cbBeforeSendForm = timeSettings.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = timeSettings.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\ttimeSettings.initialize();\n});\n"],"file":"time-settings-modify.js"}