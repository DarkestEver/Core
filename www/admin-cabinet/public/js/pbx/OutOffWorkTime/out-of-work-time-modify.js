"use strict";

/*
 * Copyright (C) MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Nikolay Beketov, 12 2019
 *
 */

/* global globalRootUrl,globalTranslate, Extensions, Form, SemanticLocalization */
$.fn.form.settings.rules.customNotEmptyIfActionRule = function (value, action) {
  if (value.length === 0 && $('#action').val() === action) {
    return false;
  }

  return true;
};

var outOfWorkTimeRecord = {
  $formObj: $('#save-outoffwork-form'),
  $rangeDaysStart: $('#range-days-start'),
  $rangeDaysEnd: $('#range-days-end'),
  $rangeTimeStart: $('#range-time-start'),
  $rangeTimeEnd: $('#range-time-end'),
  $date_from: $('#date_from'),
  $date_to: $('#date_to'),
  $time_to: $('#time_to'),
  validateRules: {
    audio_message_id: {
      identifier: 'audio_message_id',
      rules: [{
        type: 'customNotEmptyIfActionRule[playmessage]',
        prompt: globalTranslate.tf_ValidateAudioMessageEmpty
      }]
    },
    extension: {
      identifier: 'extension',
      rules: [{
        type: 'customNotEmptyIfActionRule[extension]',
        prompt: globalTranslate.tf_ValidateExtensionEmpty
      }]
    },
    timefrom: {
      optional: true,
      identifier: 'time_from',
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    },
    timeto: {
      identifier: 'time_to',
      optional: true,
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    }
  },
  initialize: function () {
    function initialize() {
      $('.dropdown-default').dropdown();
      outOfWorkTimeRecord.$rangeDaysStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeDaysEnd,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp
      });
      outOfWorkTimeRecord.$rangeDaysEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeDaysStart,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp,
        onChange: function () {
          function onChange(newDateTo) {
            var oldDateTo = outOfWorkTimeRecord.$date_to.attr('value');

            if (newDateTo !== null && oldDateTo !== '') {
              oldDateTo = new Date(oldDateTo * 1000);

              if (newDateTo - oldDateTo !== 0) {
                outOfWorkTimeRecord.$date_from.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      outOfWorkTimeRecord.$rangeTimeStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeTimeEnd,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false
      });
      outOfWorkTimeRecord.$rangeTimeEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeTimeStart,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false,
        onChange: function () {
          function onChange(newTimeTo) {
            var oldTimeTo = outOfWorkTimeRecord.$time_to.attr('value');

            if (newTimeTo !== null && oldTimeTo !== '') {
              oldTimeTo = new Date(oldTimeTo * 1000);

              if (newTimeTo - oldTimeTo !== 0) {
                outOfWorkTimeRecord.$time_to.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      $('#action').dropdown({
        onChange: function () {
          function onChange() {
            outOfWorkTimeRecord.toggleDisabledFieldClass();
          }

          return onChange;
        }()
      });
      $('#weekday_from').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (from < to || to === -1 || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_to', from);
            }
          }

          return onChange;
        }()
      });
      $('#weekday_to').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (to < from || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_from', to);
            }
          }

          return onChange;
        }()
      });
      $('#erase-dates').on('click', function (e) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('clear');
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('clear'); // outOfWorkTimeRecord.$date_from.trigger('change');

        outOfWorkTimeRecord.$formObj.form('set values', {
          date_from: '',
          date_to: ''
        });
        e.preventDefault();
      });
      $('#erase-weekdays').on('click', function (e) {
        outOfWorkTimeRecord.$formObj.form('set values', {
          weekday_from: -1,
          weekday_to: -1
        });
        outOfWorkTimeRecord.$rangeDaysStart.trigger('change');
        e.preventDefault();
      });
      $('#erase-timeperiod').on('click', function (e) {
        outOfWorkTimeRecord.$rangeTimeStart.calendar('clear');
        outOfWorkTimeRecord.$rangeTimeEnd.calendar('clear');
        outOfWorkTimeRecord.$time_to.trigger('change');
        e.preventDefault();
      });
      outOfWorkTimeRecord.initializeForm();
      $('.forwarding-select').dropdown(Extensions.getDropdownSettingsWithoutEmpty());
      Extensions.fixBugDropdownIcon();
      outOfWorkTimeRecord.toggleDisabledFieldClass();
      outOfWorkTimeRecord.changeDateFormat();
    }

    return initialize;
  }(),

  /**
   * Меняет представление даты начала и даты окончания из linuxtime в локальное представление
   */
  changeDateFormat: function () {
    function changeDateFormat() {
      var dateFrom = outOfWorkTimeRecord.$date_from.attr('value');
      var dateTo = outOfWorkTimeRecord.$date_to.attr('value');

      if (dateFrom !== undefined && dateFrom.length > 0) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('set date', new Date(dateFrom * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_from', dateFrom);
      }

      if (dateTo !== undefined && dateTo.length > 0) {
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('set date', new Date(dateTo * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_to', dateTo);
      }
    }

    return changeDateFormat;
  }(),
  toggleDisabledFieldClass: function () {
    function toggleDisabledFieldClass() {
      if (outOfWorkTimeRecord.$formObj.form('get value', 'action') === 'extension') {
        $('#extension-group').show();
        $('#audio-file-group').hide();
        $('#audio_message_id').dropdown('clear');
      } else {
        $('#extension-group').hide();
        $('#audio-file-group').show();
        outOfWorkTimeRecord.$formObj.form('set value', 'extension', -1);
      }
    }

    return toggleDisabledFieldClass;
  }(),

  /**
   * Кастомная проверка полей формы, которые не получается сделать через валидацию
   * @param result
   * @returns {*}
   */
  customValidateForm: function () {
    function customValidateForm(result) {
      // Проверим поля даты
      if (result.data.date_from !== '' && result.data.date_to === '' || result.data.date_to !== '' && result.data.date_from === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckDateInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля дней недели


      if (result.data.weekday_from > 0 && result.data.weekday_to === '-1' || result.data.weekday_to > 0 && result.data.weekday_from === '-1') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckWeekDayInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени на соблюдение формату


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим все поля


      if (result.data.time_from === '' && result.data.time_to === '' && result.data.weekday_from === '-1' && result.data.weekday_to === '-1' && result.data.date_from === '' && result.data.date_to === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateNoRulesSelected).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      }

      return result;
    }

    return customValidateForm;
  }(),
  cbBeforeSendForm: function () {
    function cbBeforeSendForm(settings) {
      var result = settings;
      $('.form .error.message').html('').hide();
      result.data = outOfWorkTimeRecord.$formObj.form('get values');
      var dateFrom = outOfWorkTimeRecord.$rangeDaysStart.calendar('get date');

      if (dateFrom !== null) {
        dateFrom.setHours(0, 0, 0, 0);
        result.data.date_from = Math.round(dateFrom.getTime() / 1000);
      }

      var dateTo = outOfWorkTimeRecord.$rangeDaysEnd.calendar('get date');

      if (dateTo !== null) {
        dateTo.setHours(23, 59, 59, 0);
        result.data.date_to = Math.round(dateTo.getTime() / 1000);
      }

      return outOfWorkTimeRecord.customValidateForm(result);
    }

    return cbBeforeSendForm;
  }(),
  cbAfterSendForm: function () {
    function cbAfterSendForm() {}

    return cbAfterSendForm;
  }(),
  initializeForm: function () {
    function initializeForm() {
      Form.$formObj = outOfWorkTimeRecord.$formObj;
      Form.url = "".concat(globalRootUrl, "out-off-work-time/save");
      Form.validateRules = outOfWorkTimeRecord.validateRules;
      Form.cbBeforeSendForm = outOfWorkTimeRecord.cbBeforeSendForm;
      Form.cbAfterSendForm = outOfWorkTimeRecord.cbAfterSendForm;
      Form.initialize();
    }

    return initializeForm;
  }()
};
$(document).ready(function () {
  outOfWorkTimeRecord.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9PdXRPZmZXb3JrVGltZS9vdXQtb2Ytd29yay10aW1lLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmb3JtIiwic2V0dGluZ3MiLCJydWxlcyIsImN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlIiwidmFsdWUiLCJhY3Rpb24iLCJsZW5ndGgiLCJ2YWwiLCJvdXRPZldvcmtUaW1lUmVjb3JkIiwiJGZvcm1PYmoiLCIkcmFuZ2VEYXlzU3RhcnQiLCIkcmFuZ2VEYXlzRW5kIiwiJHJhbmdlVGltZVN0YXJ0IiwiJHJhbmdlVGltZUVuZCIsIiRkYXRlX2Zyb20iLCIkZGF0ZV90byIsIiR0aW1lX3RvIiwidmFsaWRhdGVSdWxlcyIsImF1ZGlvX21lc3NhZ2VfaWQiLCJpZGVudGlmaWVyIiwidHlwZSIsInByb21wdCIsImdsb2JhbFRyYW5zbGF0ZSIsInRmX1ZhbGlkYXRlQXVkaW9NZXNzYWdlRW1wdHkiLCJleHRlbnNpb24iLCJ0Zl9WYWxpZGF0ZUV4dGVuc2lvbkVtcHR5IiwidGltZWZyb20iLCJvcHRpb25hbCIsInRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwiLCJ0aW1ldG8iLCJpbml0aWFsaXplIiwiZHJvcGRvd24iLCJjYWxlbmRhciIsImZpcnN0RGF5T2ZXZWVrIiwiU2VtYW50aWNMb2NhbGl6YXRpb24iLCJjYWxlbmRhckZpcnN0RGF5T2ZXZWVrIiwidGV4dCIsImNhbGVuZGFyVGV4dCIsImVuZENhbGVuZGFyIiwiaW5saW5lIiwibW9udGhGaXJzdCIsInJlZ0V4cCIsInN0YXJ0Q2FsZW5kYXIiLCJvbkNoYW5nZSIsIm5ld0RhdGVUbyIsIm9sZERhdGVUbyIsImF0dHIiLCJEYXRlIiwidHJpZ2dlciIsImRpc2FibGVNaW51dGUiLCJhbXBtIiwibmV3VGltZVRvIiwib2xkVGltZVRvIiwidG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzIiwiZnJvbSIsInRvIiwib24iLCJlIiwiZGF0ZV9mcm9tIiwiZGF0ZV90byIsInByZXZlbnREZWZhdWx0Iiwid2Vla2RheV9mcm9tIiwid2Vla2RheV90byIsImluaXRpYWxpemVGb3JtIiwiRXh0ZW5zaW9ucyIsImdldERyb3Bkb3duU2V0dGluZ3NXaXRob3V0RW1wdHkiLCJmaXhCdWdEcm9wZG93bkljb24iLCJjaGFuZ2VEYXRlRm9ybWF0IiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJ1bmRlZmluZWQiLCJzaG93IiwiaGlkZSIsImN1c3RvbVZhbGlkYXRlRm9ybSIsInJlc3VsdCIsImRhdGEiLCJodG1sIiwidGZfVmFsaWRhdGVDaGVja0RhdGVJbnRlcnZhbCIsIkZvcm0iLCIkc3VibWl0QnV0dG9uIiwidHJhbnNpdGlvbiIsInJlbW92ZUNsYXNzIiwidGZfVmFsaWRhdGVDaGVja1dlZWtEYXlJbnRlcnZhbCIsInRpbWVfZnJvbSIsInRpbWVfdG8iLCJ0Zl9WYWxpZGF0ZU5vUnVsZXNTZWxlY3RlZCIsImNiQmVmb3JlU2VuZEZvcm0iLCJzZXRIb3VycyIsIk1hdGgiLCJyb3VuZCIsImdldFRpbWUiLCJjYkFmdGVyU2VuZEZvcm0iLCJ1cmwiLCJnbG9iYWxSb290VXJsIiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7Ozs7QUFRQTtBQUdBQSxDQUFDLENBQUNDLEVBQUYsQ0FBS0MsSUFBTCxDQUFVQyxRQUFWLENBQW1CQyxLQUFuQixDQUF5QkMsMEJBQXpCLEdBQXNELFVBQUNDLEtBQUQsRUFBUUMsTUFBUixFQUFtQjtBQUN4RSxNQUFJRCxLQUFLLENBQUNFLE1BQU4sS0FBaUIsQ0FBakIsSUFBc0JSLENBQUMsQ0FBQyxTQUFELENBQUQsQ0FBYVMsR0FBYixPQUF1QkYsTUFBakQsRUFBeUQ7QUFDeEQsV0FBTyxLQUFQO0FBQ0E7O0FBQ0QsU0FBTyxJQUFQO0FBQ0EsQ0FMRDs7QUFPQSxJQUFNRyxtQkFBbUIsR0FBRztBQUMzQkMsRUFBQUEsUUFBUSxFQUFFWCxDQUFDLENBQUMsdUJBQUQsQ0FEZ0I7QUFFM0JZLEVBQUFBLGVBQWUsRUFBRVosQ0FBQyxDQUFDLG1C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Z0JBQUwsR0FBd0I5RSxtQkFBbUIsQ0FBQzhFLGdCQUE1QztBQUNBUixNQUFBQSxJQUFJLENBQUNhLGVBQUwsR0FBdUJuRixtQkFBbUIsQ0FBQ21GLGVBQTNDO0FBQ0FiLE1BQUFBLElBQUksQ0FBQ2hELFVBQUw7QUFDQTs7QUExUTBCO0FBQUE7QUFBQSxDQUE1QjtBQTZRQWhDLENBQUMsQ0FBQ2dHLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQU07QUFDdkJ2RixFQUFBQSxtQkFBbUIsQ0FBQ3NCLFVBQXBCO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIE1JS08gTExDIC0gQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogVW5hdXRob3JpemVkIGNvcHlpbmcgb2YgdGhpcyBmaWxlLCB2aWEgYW55IG1lZGl1bSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkXG4gKiBQcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsXG4gKiBXcml0dGVuIGJ5IE5pa29sYXkgQmVrZXRvdiwgMTIgMjAxOVxuICpcbiAqL1xuXG4vKiBnbG9iYWwgZ2xvYmFsUm9vdFVybCxnbG9iYWxUcmFuc2xhdGUsIEV4dGVuc2lvbnMsIEZvcm0sIFNlbWFudGljTG9jYWxpemF0aW9uICovXG5cblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlID0gKHZhbHVlLCBhY3Rpb24pID0+IHtcblx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCAmJiAkKCcjYWN0aW9uJykudmFsKCkgPT09IGFjdGlvbikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IG91dE9mV29ya1RpbWVSZWNvcmQgPSB7XG5cdCRmb3JtT2JqOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0nKSxcblx0JHJhbmdlRGF5c1N0YXJ0OiAkKCcjcmFuZ2UtZGF5cy1zdGFydCcpLFxuXHQkcmFuZ2VEYXlzRW5kOiAkKCcjcmFuZ2UtZGF5cy1lbmQnKSxcblx0JHJhbmdlVGltZVN0YXJ0OiAkKCcjcmFuZ2UtdGltZS1zdGFydCcpLFxuXHQkcmFuZ2VUaW1lRW5kOiAkKCcjcmFuZ2UtdGltZS1lbmQnKSxcblx0JGRhdGVfZnJvbTogJCgnI2RhdGVfZnJvbScpLFxuXHQkZGF0ZV90bzogJCgnI2RhdGVfdG8nKSxcblx0JHRpbWVfdG86ICQoJyN0aW1lX3RvJyksXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRhdWRpb19tZXNzYWdlX2lkOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnYXVkaW9fbWVzc2FnZV9pZCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2N1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlW3BsYXltZXNzYWdlXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRleHRlbnNpb246IHtcblx0XHRcdGlkZW50aWZpZXI6ICdleHRlbnNpb24nLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdjdXN0b21Ob3RFbXB0eUlmQWN0aW9uUnVsZVtleHRlbnNpb25dJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUV4dGVuc2lvbkVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdHRpbWVmcm9tOiB7XG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdGlkZW50aWZpZXI6ICd0aW1lX2Zyb20nLFxuXHRcdFx0cnVsZXM6IFt7XG5cdFx0XHRcdHR5cGU6ICdyZWdFeHAnLFxuXHRcdFx0XHR2YWx1ZTogL14oMlswLTNdfDE/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCxcblx0XHRcdH1dLFxuXHRcdH0sXG5cdFx0dGltZXRvOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAndGltZV90bycsXG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdHJ1bGVzOiBbe1xuXHRcdFx0XHR0eXBlOiAncmVnRXhwJyxcblx0XHRcdFx0dmFsdWU6IC9eKDJbMC0zXXwxP1swLTldKTooWzAtNV0/WzAtOV0pJC8sXG5cdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwsXG5cdFx0XHR9XSxcblx0XHR9LFxuXHR9LFxuXHRpbml0aWFsaXplKCkge1xuXHRcdCQoJy5kcm9wZG93bi1kZWZhdWx0JykuZHJvcGRvd24oKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdGVuZENhbGVuZGFyOiBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQsXG5cdFx0XHR0eXBlOiAnZGF0ZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0bW9udGhGaXJzdDogZmFsc2UsXG5cdFx0XHRyZWdFeHA6IFNlbWFudGljTG9jYWxpemF0aW9uLnJlZ0V4cCxcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRzdGFydENhbGVuZGFyOiBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydCxcblx0XHRcdHR5cGU6ICdkYXRlJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRtb250aEZpcnN0OiBmYWxzZSxcblx0XHRcdHJlZ0V4cDogU2VtYW50aWNMb2NhbGl6YXRpb24ucmVnRXhwLFxuXHRcdFx0b25DaGFuZ2U6IChuZXdEYXRlVG8pID0+IHtcblx0XHRcdFx0bGV0IG9sZERhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfdG8uYXR0cigndmFsdWUnKTtcblx0XHRcdFx0aWYgKG5ld0RhdGVUbyAhPT0gbnVsbCAmJiBvbGREYXRlVG8gIT09ICcnKSB7XG5cdFx0XHRcdFx0b2xkRGF0ZVRvID0gbmV3IERhdGUob2xkRGF0ZVRvICogMTAwMCk7XG5cdFx0XHRcdFx0aWYgKChuZXdEYXRlVG8gLSBvbGREYXRlVG8pICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX2Zyb20udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZVN0YXJ0LmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0ZW5kQ2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZUVuZCxcblx0XHRcdHR5cGU6ICd0aW1lJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRkaXNhYmxlTWludXRlOiB0cnVlLFxuXHRcdFx0YW1wbTogZmFsc2UsXG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lRW5kLmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0c3RhcnRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lU3RhcnQsXG5cdFx0XHR0eXBlOiAndGltZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0ZGlzYWJsZU1pbnV0ZTogdHJ1ZSxcblx0XHRcdGFtcG06IGZhbHNlLFxuXHRcdFx0b25DaGFuZ2U6IChuZXdUaW1lVG8pID0+IHtcblx0XHRcdFx0bGV0IG9sZFRpbWVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8uYXR0cigndmFsdWUnKTtcblx0XHRcdFx0aWYgKG5ld1RpbWVUbyAhPT0gbnVsbCAmJiBvbGRUaW1lVG8gIT09ICcnKSB7XG5cdFx0XHRcdFx0b2xkVGltZVRvID0gbmV3IERhdGUob2xkVGltZVRvICogMTAwMCk7XG5cdFx0XHRcdFx0aWYgKChuZXdUaW1lVG8gLSBvbGRUaW1lVG8pICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiR0aW1lX3RvLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHQkKCcjYWN0aW9uJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQudG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHQkKCcjd2Vla2RheV9mcm9tJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdGNvbnN0IGZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nKTtcblx0XHRcdFx0XHRjb25zdCB0byA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfdG8nKTtcblx0XHRcdFx0XHRpZiAoZnJvbSA8IHRvIHx8IHRvID09PSAtMSB8fCBmcm9tID09PSAtMSkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnd2Vla2RheV90bycsIGZyb20pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdCQoJyN3ZWVrZGF5X3RvJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdGNvbnN0IGZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nKTtcblx0XHRcdFx0XHRjb25zdCB0byA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfdG8nKTtcblx0XHRcdFx0XHRpZiAodG8gPCBmcm9tIHx8IGZyb20gPT09IC0xKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nLCB0byk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cblx0XHQkKCcjZXJhc2UtZGF0ZXMnKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHQvLyBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX2Zyb20udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqXG5cdFx0XHRcdC5mb3JtKCdzZXQgdmFsdWVzJywge1xuXHRcdFx0XHRcdGRhdGVfZnJvbTogJycsXG5cdFx0XHRcdFx0ZGF0ZV90bzogJycsXG5cdFx0XHRcdH0pO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXG5cdFx0JCgnI2VyYXNlLXdlZWtkYXlzJykub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmpcblx0XHRcdFx0LmZvcm0oJ3NldCB2YWx1ZXMnLCB7XG5cdFx0XHRcdFx0d2Vla2RheV9mcm9tOiAtMSxcblx0XHRcdFx0XHR3ZWVrZGF5X3RvOiAtMSxcblx0XHRcdFx0fSk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0XHQkKCcjZXJhc2UtdGltZXBlcmlvZCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVTdGFydC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZUVuZC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC5pbml0aWFsaXplRm9ybSgpO1xuXG5cdFx0JCgnLmZvcndhcmRpbmctc2VsZWN0JykuZHJvcGRvd24oRXh0ZW5zaW9ucy5nZXREcm9wZG93blNldHRpbmdzV2l0aG91dEVtcHR5KCkpO1xuXHRcdEV4dGVuc2lvbnMuZml4QnVnRHJvcGRvd25JY29uKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLmNoYW5nZURhdGVGb3JtYXQoKTtcblx0fSxcblx0LyoqXG5cdCAqINCc0LXQvdGP0LXRgiDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDQtNCw0YLRiyDQvdCw0YfQsNC70LAg0Lgg0LTQsNGC0Ysg0L7QutC+0L3Rh9Cw0L3QuNGPINC40LcgbGludXh0aW1lINCyINC70L7QutCw0LvRjNC90L7QtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVxuXHQgKi9cblx0Y2hhbmdlRGF0ZUZvcm1hdCgpIHtcblx0XHRjb25zdCBkYXRlRnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfZnJvbS5hdHRyKCd2YWx1ZScpO1xuXHRcdGNvbnN0IGRhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfdG8uYXR0cigndmFsdWUnKTtcblx0XHRpZiAoZGF0ZUZyb20gIT09IHVuZGVmaW5lZCAmJiAgZGF0ZUZyb20ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ3NldCBkYXRlJywgbmV3IERhdGUoZGF0ZUZyb20gKiAxMDAwKSk7XG5cdFx0XHQvLyBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdkYXRlX2Zyb20nLCBkYXRlRnJvbSk7XG5cdFx0fVxuXHRcdGlmIChkYXRlVG8gIT09IHVuZGVmaW5lZCAmJiBkYXRlVG8ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKCdzZXQgZGF0ZScsIG5ldyBEYXRlKGRhdGVUbyAqIDEwMDApKTtcblx0XHRcdC8vIG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2RhdGVfdG8nLCBkYXRlVG8pO1xuXHRcdH1cblx0fSxcblx0dG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCkge1xuXHRcdGlmIChvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICdhY3Rpb24nKSA9PT0gJ2V4dGVuc2lvbicpIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5zaG93KCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLmhpZGUoKTtcblx0XHRcdCQoJyNhdWRpb19tZXNzYWdlX2lkJykuZHJvcGRvd24oJ2NsZWFyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5oaWRlKCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLnNob3coKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2V4dGVuc2lvbicsIC0xKTtcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiDQmtCw0YHRgtC+0LzQvdCw0Y8g0L/RgNC+0LLQtdGA0LrQsCDQv9C+0LvQtdC5INGE0L7RgNC80YssINC60L7RgtC+0YDRi9C1INC90LUg0L/QvtC70YPRh9Cw0LXRgtGB0Y8g0YHQtNC10LvQsNGC0Ywg0YfQtdGA0LXQtyDQstCw0LvQuNC00LDRhtC40Y5cblx0ICogQHBhcmFtIHJlc3VsdFxuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpIHtcblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINC00LDRgtGLXG5cdFx0aWYgKChyZXN1bHQuZGF0YS5kYXRlX2Zyb20gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfdG8gPT09ICcnKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLmRhdGVfdG8gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9PT0gJycpKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tEYXRlSW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LTQvdC10Lkg0L3QtdC00LXQu9C4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS53ZWVrZGF5X2Zyb20gPiAwICYmIHJlc3VsdC5kYXRhLndlZWtkYXlfdG8gPT09ICctMScpXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEud2Vla2RheV90byA+IDAgJiYgcmVzdWx0LmRhdGEud2Vla2RheV9mcm9tID09PSAnLTEnKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrV2Vla0RheUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA9PT0gMClcblx0XHRcdHx8IChyZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4INC90LAg0YHQvtCx0LvRjtC00LXQvdC40LUg0YTQvtGA0LzQsNGC0YNcblx0XHRpZiAoKHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID09PSAwKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQstGB0LUg0L/QvtC70Y9cblx0XHRpZiAocmVzdWx0LmRhdGEudGltZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEudGltZV90byA9PT0gJydcblx0XHRcdCYmIHJlc3VsdC5kYXRhLndlZWtkYXlfZnJvbSA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEud2Vla2RheV90byA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV90byA9PT0gJycpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVOb1J1bGVzU2VsZWN0ZWQpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoJycpLmhpZGUoKTtcblx0XHRyZXN1bHQuZGF0YSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdGNvbnN0IGRhdGVGcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ2dldCBkYXRlJyk7XG5cdFx0aWYgKGRhdGVGcm9tICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlRnJvbS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblx0XHRcdHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9IE1hdGgucm91bmQoZGF0ZUZyb20uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdGNvbnN0IGRhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignZ2V0IGRhdGUnKTtcblx0XHRpZiAoZGF0ZVRvICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlVG8uc2V0SG91cnMoMjMsIDU5LCA1OSwgMCk7XG5cdFx0XHRyZXN1bHQuZGF0YS5kYXRlX3RvID0gTWF0aC5yb3VuZChkYXRlVG8uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdHJldHVybiBvdXRPZldvcmtUaW1lUmVjb3JkLmN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpO1xuXHR9LFxuXHRjYkFmdGVyU2VuZEZvcm0oKSB7XG5cblx0fSxcblx0aW5pdGlhbGl6ZUZvcm0oKSB7XG5cdFx0Rm9ybS4kZm9ybU9iaiA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW91dC1vZmYtd29yay10aW1lL3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IG91dE9mV29ya1RpbWVSZWNvcmQudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0b3V0T2ZXb3JrVGltZVJlY29yZC5pbml0aWFsaXplKCk7XG59KTtcbiJdfQ==