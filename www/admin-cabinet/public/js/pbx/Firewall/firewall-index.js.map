{"version":3,"sources":["../../src/Firewall/firewall-index.js"],"names":["firewallTable","$statusToggle","$","$addNewButton","$settings","initialize","on","e","id","target","closest","attr","window","location","globalRootUrl","checkbox","onChecked","enableFirewall","onUnchecked","disableFirewall","api","url","onSuccess","response","success","cbAfterEnabled","cbAfterDisabled","sendEvent","find","text","globalTranslate","fw_StatusEnabled","removeClass","addClass","hide","event","document","createEvent","initEvent","dispatchEvent","fw_StatusDisabled","show","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\n\n/* global globalRootUrl, globalTranslate */\n\nconst firewallTable = {\n\t$statusToggle: $('#status-toggle'),\n\t$addNewButton: $('#add-new-button'),\n\t$settings: $('#firewall-settings'),\n\tinitialize() {\n\t\t$('.rule-row td').on('dblclick', (e) => {\n\t\t\tconst id = $(e.target).closest('tr').attr('id');\n\t\t\twindow.location = `${globalRootUrl}firewall/modify/${id}`;\n\t\t});\n\t\tfirewallTable.$statusToggle\n\t\t\t.checkbox({\n\t\t\t\tonChecked() {\n\t\t\t\t\tfirewallTable.enableFirewall();\n\t\t\t\t},\n\t\t\t\tonUnchecked() {\n\t\t\t\t\tfirewallTable.disableFirewall();\n\t\t\t\t},\n\t\t\t});\n\t},\n\t/**\n\t * Включить firewall\n\t */\n\tenableFirewall() {\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}firewall/enable`,\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tfirewallTable.cbAfterEnabled(true);\n\t\t\t\t} else {\n\t\t\t\t\tfirewallTable.cbAfterDisabled();\n\t\t\t\t}\n\t\t\t},\n\n\t\t});\n\t},\n\t/**\n\t * Включить firewall\n\t */\n\tdisableFirewall() {\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}firewall/disable`,\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tfirewallTable.cbAfterDisabled(true);\n\t\t\t\t} else {\n\t\t\t\t\tfirewallTable.cbAfterEnabled();\n\t\t\t\t}\n\t\t\t},\n\n\t\t});\n\t},\n\t/**\n\t * Обработчки после включения firewall\n\t */\n\tcbAfterEnabled(sendEvent = false) {\n\t\tfirewallTable.$statusToggle.find('label').text(globalTranslate.fw_StatusEnabled);\n\t\tfirewallTable.$statusToggle.checkbox('set checked');\n\t\t$('i.icon.checkmark.green[data-value=\"off\"]')\n\t\t\t.removeClass('checkmark green')\n\t\t\t.addClass('close red');\n\t\t$('i.icon.corner.close').hide();\n\n\t\tif (sendEvent) {\n\t\t\tconst event = document.createEvent('Event');\n\t\t\tevent.initEvent('ConfigDataChanged', false, true);\n\t\t\twindow.dispatchEvent(event);\n\t\t}\n\t},\n\t/**\n\t * Обработчки после выключения firewall\n\t */\n\tcbAfterDisabled(sendEvent = false) {\n\t\tfirewallTable.$statusToggle.find('label').text(globalTranslate.fw_StatusDisabled);\n\t\tfirewallTable.$statusToggle.checkbox('set unchecked');\n\t\t$('i.icon.close.red[data-value=\"off\"]')\n\t\t\t.removeClass('close red')\n\t\t\t.addClass('checkmark green');\n\t\t$('i.icon.corner.close').show();\n\t\tif (sendEvent) {\n\t\t\tconst event = document.createEvent('Event');\n\t\t\tevent.initEvent('ConfigDataChanged', false, true);\n\t\t\twindow.dispatchEvent(event);\n\t\t}\n\t},\n};\n\n$(document).ready(() => {\n\tfirewallTable.initialize();\n});\n\n"],"file":"firewall-index.js"}