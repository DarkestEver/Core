{"version":3,"sources":["../../src/MailSettings/mail-settings-modify.js"],"names":["mailSettings","$formObj","$","validateRules","name","identifier","rules","type","prompt","globalTranslate","cq_ValidateNameEmpty","initialize","tab","checkbox","initializeForm","updateMailSettingsCallback","response","result","toUpperCase","after","ms_TestEmailSubject","testEmail","form","length","params","email","subject","body","ms_TestEmailBody","encode","PbxApi","SendTestEmail","cbAfterEmailSend","message","UserMessage","showInformation","ms_TestEmailSentSuccessfully","showError","cbBeforeSendForm","settings","data","cbAfterSendForm","success","UpdateMailSettings","Form","url","globalRootUrl","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 5 2018\n *\n */\n\n/* global globalRootUrl,globalTranslate, Form, PbxApi, UserMessage */\n\nconst mailSettings = {\n\t$formObj: $('#mail-settings-form'),\n\tvalidateRules: {\n\t\tname: {\n\t\t\tidentifier: 'name',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.cq_ValidateNameEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\t$('#mail-settings-menu .item').tab();\n\t\t$('.checkbox').checkbox();\n\n\t\tmailSettings.initializeForm();\n\t},\n\tupdateMailSettingsCallback(response) {\n\t\tif (response.result.toUpperCase() === 'SUCCESS') {\n\t\t\tmailSettings.$formObj.after(`<div class=\"ui success message ajax\">${globalTranslate.ms_TestEmailSubject}</div>`);\n\t\t\tconst testEmail = mailSettings.$formObj.form('get value', 'SystemNotificationsEmail');\n\t\t\tif (testEmail.length > 0) {\n\t\t\t\tconst params = {\n\t\t\t\t\temail: testEmail,\n\t\t\t\t\tsubject: globalTranslate.ms_TestEmailSubject,\n\t\t\t\t\tbody: globalTranslate.ms_TestEmailBody,\n\t\t\t\t\tencode: '',\n\t\t\t\t};\n\t\t\t\tPbxApi.SendTestEmail(params, mailSettings.cbAfterEmailSend);\n\t\t\t}\n\t\t}\n\t},\n\tcbAfterEmailSend(message) {\n\t\tif (message === true) {\n\t\t\tUserMessage.showInformation(globalTranslate.ms_TestEmailSentSuccessfully);\n\t\t} else if (message.length > 0) {\n\t\t\tUserMessage.showError(message);\n\t\t}\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = mailSettings.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm(response) {\n\t\tif (response.success === true) {\n\t\t\tPbxApi.UpdateMailSettings(mailSettings.updateMailSettingsCallback);\n\t\t}\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = mailSettings.$formObj;\n\t\tForm.url = `${globalRootUrl}mail-settings/save`;\n\t\tForm.validateRules = mailSettings.validateRules;\n\t\tForm.cbBeforeSendForm = mailSettings.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = mailSettings.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\tmailSettings.initialize();\n});\n"],"file":"mail-settings-modify.js"}