{
  "version": 3,
  "sources": [
    "../../src/MailSettings/mail-settings-modify.js"
  ],
  "names": [
    "mailSettings",
    "$formObj",
    "$",
    "validateRules",
    "name",
    "identifier",
    "rules",
    "type",
    "prompt",
    "globalTranslate",
    "cq_ValidateNameEmpty",
    "initialize",
    "tab",
    "checkbox",
    "initializeForm",
    "updateMailSettingsCallback",
    "response",
    "result",
    "toUpperCase",
    "after",
    "ms_TestEmailSubject",
    "testEmail",
    "form",
    "length",
    "params",
    "email",
    "subject",
    "body",
    "ms_TestEmailBody",
    "encode",
    "PbxApi",
    "SendTestEmail",
    "cbBeforeSendForm",
    "settings",
    "data",
    "cbAfterSendForm",
    "success",
    "UpdateMailSettings",
    "Form",
    "url",
    "globalRootUrl",
    "document",
    "ready"
  ],
  "mappings": ";;AAAA;;;;;;;;AAQA;AAEA,IAAMA,YAAY,GAAG;AACpBC,EAAAA,QAAQ,EAAEC,CAAC,CAAC,qBAAD,CADS;AAEpBC,EAAAA,aAAa,EAAE;AACdC,IAAAA,IAAI,EAAE;AACLC,MAAAA,UAAU,EAAE,MADP;AAELC,MAAAA,KAAK,EAAE,CACN;AACCC,QAAAA,IAAI,EAAE,OADP;AAECC,QAAAA,MAAM,EAAEC,eAAe,CAACC;AAFzB,OADM;AAFF;AADQ,GAFK;AAapBC,EAAAA,UAboB;AAAA,0BAaP;AACZT,MAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+BU,GAA/B;AACAV,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAeW,QAAf;AAEA,WAAKC,cAAL;AACA;;AAlBmB;AAAA;AAmBpBC,EAAAA,0BAnBoB;AAAA,wCAmBOC,QAnBP,EAmBiB;AACpC,UAAIA,QAAQ,CAACC,MAAT,CAAgBC,WAAhB,OAAkC,SAAtC,EAAiD;AAChDlB,QAAAA,YAAY,CAACC,QAAb,CAAsBkB,KAAtB,kDAAoEV,eAAe,CAACW,mBAApF;AACA,YAAMC,SAAS,GAAGrB,YAAY,CAACC,QAAb,CAAsBqB,IAAtB,CAA2B,WAA3B,EAAwC,0BAAxC,CAAlB;;AACA,YAAID,SAAS,CAACE,MAAV,GAAmB,CAAvB,EAA0B;AACzB,cAAMC,MAAM,GAAG;AACdC,YAAAA,KAAK,EAAEJ,SADO;AAEdK,YAAAA,OAAO,EAAEjB,eAAe,CAACW,mBAFX;AAGdO,YAAAA,IAAI,EAAElB,eAAe,CAACmB,gBAHR;AAIdC,YAAAA,MAAM,EAAE;AAJM,WAAf;AAMAC,UAAAA,MAAM,CAACC,aAAP,CAAqBP,MAArB;AACA;AACD;AACD;;AAjCmB;AAAA;AAkCpBQ,EAAAA,gBAlCoB;AAAA,8BAkCHC,QAlCG,EAkCO;AAC1B,UAAMhB,MAAM,GAAGgB,QAAf;AACAhB,MAAAA,MAAM,CAACiB,IAAP,GAAclC,YAAY,CAACC,QAAb,CAAsBqB,IAAtB,CAA2B,YAA3B,CAAd;AACA,aAAOL,MAAP;AACA;;AAtCmB;AAAA;AAuCpBkB,EAAAA,eAvCoB;AAAA,6BAuCJnB,QAvCI,EAuCM;AACzB,UAAIA,QAAQ,CAACoB,OAAT,KAAqB,IAAzB,EAA+B;AAC9BN,QAAAA,MAAM,CAACO,kBAAP,CAA0BrC,YAAY,CAACe,0BAAvC;AACA;AACD;;AA3CmB;AAAA;AA4CpBD,EAAAA,cA5CoB;AAAA,8BA4CH;AAChBwB,MAAAA,IAAI,CAACrC,QAAL,GAAgBD,YAAY,CAACC,QAA7B;AACAqC,MAAAA,IAAI,CAACC,GAAL,aAAcC,aAAd;AACAF,MAAAA,IAAI,CAACnC,aAAL,GAAqBH,YAAY,CAACG,aAAlC;AACAmC,MAAAA,IAAI,CAACN,gBAAL,GAAwBhC,YAAY,CAACgC,gBAArC;AACAM,MAAAA,IAAI,CAACH,eAAL,GAAuBnC,YAAY,CAACmC,eAApC;AACAG,MAAAA,IAAI,CAAC3B,UAAL;AACA;;AAnDmB;AAAA;AAAA,CAArB;AAsDAT,CAAC,CAACuC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAM;AACvB1C,EAAAA,YAAY,CAACW,UAAb;AACA,CAFD",
  "sourcesContent": [
    "/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 5 2018\n *\n */\n\n/* global globalRootUrl,globalTranslate, Form, PbxApi */\n\nconst mailSettings = {\n\t$formObj: $('#mail-settings-form'),\n\tvalidateRules: {\n\t\tname: {\n\t\t\tidentifier: 'name',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.cq_ValidateNameEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\t$('#mail-settings-menu .item').tab();\n\t\t$('.checkbox').checkbox();\n\n\t\tthis.initializeForm();\n\t},\n\tupdateMailSettingsCallback(response) {\n\t\tif (response.result.toUpperCase() === 'SUCCESS') {\n\t\t\tmailSettings.$formObj.after(`<div class=\"ui success message ajax\">${globalTranslate.ms_TestEmailSubject}</div>`);\n\t\t\tconst testEmail = mailSettings.$formObj.form('get value', 'SystemNotificationsEmail');\n\t\t\tif (testEmail.length > 0) {\n\t\t\t\tconst params = {\n\t\t\t\t\temail: testEmail,\n\t\t\t\t\tsubject: globalTranslate.ms_TestEmailSubject,\n\t\t\t\t\tbody: globalTranslate.ms_TestEmailBody,\n\t\t\t\t\tencode: '',\n\t\t\t\t};\n\t\t\t\tPbxApi.SendTestEmail(params);\n\t\t\t}\n\t\t}\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = mailSettings.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm(response) {\n\t\tif (response.success === true) {\n\t\t\tPbxApi.UpdateMailSettings(mailSettings.updateMailSettingsCallback);\n\t\t}\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = mailSettings.$formObj;\n\t\tForm.url = `${globalRootUrl}mail-settings/save`;\n\t\tForm.validateRules = mailSettings.validateRules;\n\t\tForm.cbBeforeSendForm = mailSettings.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = mailSettings.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\tmailSettings.initialize();\n});\n"
  ],
  "file": "mail-settings-modify.js"
}