{"version":3,"sources":["../../src/Extensions/extensions.js"],"names":["Extensions","fixBugDropdownIcon","$","on","e","target","parent","find","trigger","formatDropdownResults","response","addEmpty","formattedResponse","success","results","push","name","value","type","typeLocalized","each","index","item","getDropdownSettingsWithEmpty","cbOnChange","result","apiSettings","url","globalRootUrl","cache","onResponse","onChange","parseInt","dropdown","ignoreCase","fullTextSearch","filterRemoteData","saveRemoteData","forceSelection","direction","hideDividers","templates","menu","customDropdownMenu","getDropdownSettingsWithoutEmpty","checkAvailability","oldNumber","newNumber","cssClassName","userId","removeClass","addClass","api","stateContext","beforeSend","settings","urlData","onSuccess","numberAvailable","length","getPhoneExtensions","callBack","fields","values","html","oldType","option","maybeText","text","maybeDisabled","disabled","GetPhoneRepresent","number","UpdatePhonesRepresent","htmlClass","$preprocessedObjects","numbers","el","represent","sessionStorage","getItem","indexOf","data","method","undefined","needle","message","setItem"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\n\n/* global globalRootUrl */\nconst Extensions = {\n\tfixBugDropdownIcon() {\n\t\t$('.forwarding-select .dropdown.icon').on('click', (e) => {\n\t\t\t$(e.target).parent().find('.text').trigger('click');\n\t\t});\n\t},\n\t/**\n\t * Форматирование списка выбора для выпадающих меню\n\t */\n\tformatDropdownResults(response, addEmpty) {\n\t\tconst formattedResponse = {\n\t\t\tsuccess: false,\n\t\t\tresults: [],\n\t\t};\n\t\tif (addEmpty) {\n\t\t\tformattedResponse.results.push({\n\t\t\t\tname: '-',\n\t\t\t\tvalue: -1,\n\t\t\t\ttype: '',\n\t\t\t\ttypeLocalized: '',\n\t\t\t});\n\t\t}\n\n\t\tif (response) {\n\t\t\tformattedResponse.success = true;\n\t\t\t$.each(response.results, (index, item) => {\n\t\t\t\tformattedResponse.results.push({\n\t\t\t\t\tname: item.name,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\ttype: item.type,\n\t\t\t\t\ttypeLocalized: item.typeLocalized,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn formattedResponse;\n\t},\n\tgetDropdownSettingsWithEmpty(cbOnChange = null) {\n\t\tconst result = {\n\t\t\tapiSettings: {\n\t\t\t\turl: `${globalRootUrl}extensions/getForSelect/0`,\n\t\t\t\tcache: false,\n\t\t\t\t// throttle: 400,\n\t\t\t\tonResponse(response) {\n\t\t\t\t\treturn Extensions.formatDropdownResults(response, true);\n\t\t\t\t},\n\t\t\t},\n\t\t\tonChange(value) {\n\t\t\t\tif (parseInt(value, 10) === -1) $(this).dropdown('clear');\n\t\t\t\tif (cbOnChange !== null) cbOnChange(value);\n\t\t\t},\n\t\t\tignoreCase: true,\n\t\t\tfullTextSearch: true,\n\t\t\tfilterRemoteData: true,\n\t\t\tsaveRemoteData: false,\n\t\t\tforceSelection: false,\n\t\t\tdirection: 'downward',\n\t\t\thideDividers: 'empty',\n\t\t\ttemplates: {\n\t\t\t\tmenu: Extensions.customDropdownMenu,\n\t\t\t},\n\n\t\t};\n\t\treturn result;\n\t},\n\tgetDropdownSettingsWithoutEmpty(cbOnChange = null) {\n\t\tconst result = {\n\t\t\tapiSettings: {\n\t\t\t\turl: `${globalRootUrl}extensions/getForSelect/0`,\n\t\t\t\tcache: false,\n\t\t\t\t// throttle: 400,\n\t\t\t\tonResponse(response) {\n\t\t\t\t\treturn Extensions.formatDropdownResults(response, false);\n\t\t\t\t},\n\t\t\t},\n\t\t\tignoreCase: true,\n\t\t\tfullTextSearch: true,\n\t\t\tfilterRemoteData: true,\n\t\t\tsaveRemoteData: false,\n\t\t\tforceSelection: false,\n\t\t\tdirection: 'downward',\n\t\t\thideDividers: 'empty',\n\t\t\tonChange(value) {\n\t\t\t\tif (cbOnChange !== null) cbOnChange(value);\n\t\t\t},\n\t\t\ttemplates: {\n\t\t\t\tmenu: Extensions.customDropdownMenu,\n\t\t\t},\n\t\t};\n\t\treturn result;\n\t},\n\tcheckAvailability(oldNumber, newNumber, cssClassName = 'extension', userId = '') {\n\t\tif (oldNumber === newNumber) {\n\t\t\t$(`.ui.input.${cssClassName}`).parent().removeClass('error');\n\t\t\t$(`#${cssClassName}-error`).addClass('hidden');\n\t\t\treturn;\n\t\t}\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}extensions/available/{value}`,\n\t\t\tstateContext: `.ui.input.${cssClassName}`,\n\t\t\ton: 'now',\n\t\t\tbeforeSend(settings) {\n\t\t\t\tconst result = settings;\n\t\t\t\tresult.urlData = {\n\t\t\t\t\tvalue: newNumber,\n\t\t\t\t};\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.numberAvailable) {\n\t\t\t\t\t$(`.ui.input.${cssClassName}`).parent().removeClass('error');\n\t\t\t\t\t$(`#${cssClassName}-error`).addClass('hidden');\n\t\t\t\t} else if (userId.length > 0 && response.userId === userId) {\n\t\t\t\t\t$(`.ui.input.${cssClassName}`).parent().removeClass('error');\n\t\t\t\t\t$(`#${cssClassName}-error`).addClass('hidden');\n\t\t\t\t} else {\n\t\t\t\t\t$(`.ui.input.${cssClassName}`).parent().addClass('error');\n\t\t\t\t\t$(`#${cssClassName}-error`).removeClass('hidden');\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\tgetPhoneExtensions(callBack) {\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}extensions/getForSelect/1`,\n\t\t\ton: 'now',\n\t\t\tonResponse(response) {\n\t\t\t\treturn Extensions.formatDropdownResults(response, false);\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\tcallBack(response);\n\t\t\t},\n\t\t});\n\t},\n\tcustomDropdownMenu(response, fields) {\n\t\tconst values = response[fields.values] || {};\n\t\tlet html = '';\n\t\tlet oldType = '';\n\t\t$.each(values, (index, option) => {\n\t\t\tif (option.type !== oldType) {\n\t\t\t\toldType = option.type;\n\t\t\t\thtml += '<div class=\"divider\"></div>';\n\t\t\t\thtml += '\t<div class=\"header\">';\n\t\t\t\thtml += '\t<i class=\"tags icon\"></i>';\n\t\t\t\thtml += option.typeLocalized;\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\t\t\tconst maybeText = (option[fields.text]) ? `data-text=\"${option[fields.text]}\"` : '';\n\t\t\tconst maybeDisabled = (option[fields.disabled]) ? 'disabled ' : '';\n\t\t\thtml += `<div class=\"${maybeDisabled}item\" data-value=\"${option[fields.value]}\"${maybeText}>`;\n\t\t\thtml += option[fields.name];\n\t\t\thtml += '</div>';\n\t\t});\n\t\treturn html;\n\t},\n\t/**\n\t * Возвращает представление номера телефона\n\t *\n\t */\n\tGetPhoneRepresent(callBack, number) {\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}extensions/GetPhoneRepresentAction/${number}`,\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tcallBack(response);\n\t\t\t},\n\t\t});\n\t},\n\t/**\n\t * Возвращает представление номера телефона\n\t *\n\t */\n\tUpdatePhonesRepresent(htmlClass) {\n\t\tconst $preprocessedObjects = $(`.${htmlClass}`);\n\t\tif ($preprocessedObjects.length === 0) return;\n\t\tconst numbers = [];\n\t\t$preprocessedObjects.each((index, el) => {\n\t\t\tconst number = $(el).text();\n\t\t\tconst represent = sessionStorage.getItem(number);\n\t\t\tif (represent) {\n\t\t\t\t$(el).html(represent);\n\t\t\t\t$(el).removeClass(htmlClass);\n\t\t\t} else if (numbers.indexOf(number) === -1) {\n\t\t\t\tnumbers.push(number);\n\t\t\t}\n\t\t});\n\t\tif (numbers.length === 0) return;\n\t\t$.api({\n\t\t\turl: `${globalRootUrl}extensions/GetPhonesRepresent/`,\n\t\t\tdata: { numbers },\n\t\t\tmethod: 'POST',\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response !== undefined && response.success === true) {\n\t\t\t\t\t$preprocessedObjects.each((index, el) => {\n\t\t\t\t\t\tconst needle = $(el).text();\n\t\t\t\t\t\tif (response.message[needle] !== undefined) {\n\t\t\t\t\t\t\t$(el).html(response.message[needle].represent);\n\t\t\t\t\t\t\tsessionStorage.setItem(needle, response.message[needle].represent);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(el).removeClass(htmlClass);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n};\n"],"file":"extensions.js"}