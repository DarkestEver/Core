{"version":3,"sources":["../../src/Backup/backup-automatic.js"],"names":["automaticBackup","$timeStart","$","$everySelect","$enableTgl","$sftpTgl","$ftpPort","$formObj","$createNowTgl","validateRules","ftp_host","identifier","rules","type","prompt","globalTranslate","bkp_ValidateHostEmpty","ftp_port","bkp_ValidatePortEmpty","at_time","bkp_ValidateTimeEmpty","keep_older_versions","bkp_ValidateKeepVersionsEmpty","initialize","dropdown","calendar","firstDayOfWeek","SemanticLocalization","calendarFirstDayOfWeek","text","calendarText","disableMinute","ampm","checkbox","onChange","onEnableToggleChange","fireOnInit","onSftpToggleChange","initializeForm","addClass","removeClass","val","cbBeforeSendForm","settings","result","data","form","cbAfterSendForm","PbxApi","BackupStartScheduled","cbAfterStartScheduled","window","location","globalRootUrl","Form","url","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 6 2018\n *\n */\n\n/* global globalRootUrl, globalTranslate, Form, SemanticLocalization, PbxApi */\n\nconst automaticBackup = {\n\t$timeStart: $('#time-start'),\n\t$everySelect: $('#every'),\n\t$enableTgl: $('#enable-disable-toggle'),\n\t$sftpTgl: $('#sftp-toggle'),\n\t$ftpPort: $('#ftp_port'),\n\t$formObj: $('#backup-automatic-form'),\n\t$createNowTgl: $('#create-now'),\n\tvalidateRules: {\n\t\tftp_host: {\n\t\t\tidentifier: 'ftp_host',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.bkp_ValidateHostEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tftp_port: {\n\t\t\tidentifier: 'ftp_port',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'integer[0..65535]',\n\t\t\t\t\tprompt: globalTranslate.bkp_ValidatePortEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tat_time: {\n\t\t\tidentifier: 'at_time',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.bkp_ValidateTimeEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tkeep_older_versions: {\n\t\t\tidentifier: 'keep_older_versions',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'integer[1..99]',\n\t\t\t\t\tprompt: globalTranslate.bkp_ValidateKeepVersionsEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\tautomaticBackup.$everySelect.dropdown();\n\t\tautomaticBackup.$timeStart.calendar({\n\t\t\tfirstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,\n\t\t\ttext: SemanticLocalization.calendarText,\n\t\t\ttype: 'time',\n\t\t\tdisableMinute: false,\n\t\t\tampm: false,\n\t\t});\n\t\tautomaticBackup.$enableTgl.checkbox({\n\t\t\tonChange: automaticBackup.onEnableToggleChange,\n\t\t\tfireOnInit: true,\n\t\t});\n\t\tautomaticBackup.$sftpTgl.checkbox({\n\t\t\tonChange: automaticBackup.onSftpToggleChange,\n\t\t});\n\t\tautomaticBackup.initializeForm();\n\t},\n\tonEnableToggleChange() {\n\t\tif (automaticBackup.$enableTgl.checkbox('is unchecked')) {\n\t\t\t$('.disability').addClass('disabled');\n\t\t} else {\n\t\t\t$('.disability').removeClass('disabled');\n\t\t}\n\t},\n\tonSftpToggleChange() {\n\t\tif (automaticBackup.$sftpTgl.checkbox('is checked')) {\n\t\t\tautomaticBackup.$ftpPort.val('22');\n\t\t} else {\n\t\t\tautomaticBackup.$ftpPort.val('21');\n\t\t}\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = automaticBackup.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm() {\n\t\tif (automaticBackup.$createNowTgl.checkbox('is checked')) {\n\t\t\tPbxApi.BackupStartScheduled(automaticBackup.cbAfterStartScheduled);\n\t\t}\n\t},\n\tcbAfterStartScheduled(result) {\n\t\tif (result) {\n\t\t\twindow.location = `${globalRootUrl}backup/index`;\n\t\t}\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = automaticBackup.$formObj;\n\t\tForm.url = `${globalRootUrl}backup/save`;\n\t\tForm.validateRules = automaticBackup.validateRules;\n\t\tForm.cbBeforeSendForm = automaticBackup.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = automaticBackup.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\tautomaticBackup.initialize();\n});\n\n"],"file":"backup-automatic.js"}