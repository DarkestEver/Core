{"version":3,"sources":["../../src/Update/update-index.js"],"names":["upgradeStatusLoopWorker","timeOut","timeOutHandle","iterations","$ajaxMessgesDiv","$","initialize","restartWorker","window","clearTimeout","timeoutHandle","worker","PbxApi","SystemGetUpgradeStatus","cbRefreshUpgradeStatus","response","setTimeout","length","d_status","closest","find","text","d_status_progress","addClass","removeClass","remove","after","globalTranslate","upd_DownloadUpgradeError","updatePBX","$formObj","$submitButton","$progressBar","currentVersion","globalPBXVersion","$restoreModalForm","upgradeInProgress","modal","on","e","target","parents","click","files","undefined","filename","name","parent","val","preventDefault","hasClass","form","fields","validateRules","onSuccess","closable","onDeny","onApprove","ConfigWorker","stopConfigWorker","data","SystemUpgrade","cbAfterUploadFile","requestData","TYPE","LICENSE","globalPBXLicense","PBXVER","LANGUAGE","globalPBXLanguage","api","url","method","successTest","Object","keys","result","toUpperCase","currentVerison","replace","firmware","forEach","obj","version","AddNewVersionInformation","params","$aLink","updateLink","attr","md5","size","SystemUpgradeOnline","upd_UploadError","progress","percent","parseInt","show","dymanicRow","decodeURIComponent","description","href","append","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 7 2018\n *\n */\n\n/* global PbxApi, globalPBXVersion, globalTranslate, ConfigWorker,\nglobalPBXLicense, globalPBXLanguage, globalPBXVersion */\n\nconst upgradeStatusLoopWorker = {\n\ttimeOut: 1000,\n\ttimeOutHandle: '',\n\titerations: 0,\n\t$ajaxMessgesDiv: $('#ajax-messages'),\n\tinitialize() {\n\t\tupgradeStatusLoopWorker.iterations = 0;\n\t\tupgradeStatusLoopWorker.restartWorker();\n\t},\n\trestartWorker() {\n\t\twindow.clearTimeout(upgradeStatusLoopWorker.timeoutHandle);\n\t\tupgradeStatusLoopWorker.worker();\n\t},\n\tworker() {\n\t\twindow.clearTimeout(upgradeStatusLoopWorker.timeoutHandle);\n\t\tPbxApi.SystemGetUpgradeStatus(upgradeStatusLoopWorker.cbRefreshUpgradeStatus);\n\t},\n\tcbRefreshUpgradeStatus(response) {\n\t\tupgradeStatusLoopWorker.iterations += 1;\n\t\tupgradeStatusLoopWorker.timeoutHandle =\n\t\t\twindow.setTimeout(upgradeStatusLoopWorker.worker, upgradeStatusLoopWorker.timeOut);\n\t\tif (response.length === 0 || response === false) return;\n\t\tif (response.d_status === 'DOWNLOAD_IN_PROGRESS') {\n\t\t\t$('i.loading.redo').closest('a').find('.percent').text(`${response.d_status_progress}%`);\n\t\t} else if (response.d_status === 'DOWNLOAD_COMPLETE') {\n\t\t\twindow.clearTimeout(upgradeStatusLoopWorker.timeoutHandle);\n\t\t\t$('i.loading.redo').closest('a').find('.percent').text(`${response.d_status_progress}%`);\n\t\t\t$('i.loading.redo').addClass('sync').removeClass('redo');\n\t\t} else if (response.d_status === 'DOWNLOAD_ERROR') {\n\t\t\twindow.clearTimeout(upgradeStatusLoopWorker.timeoutHandle);\n\t\t\t$('.ui.message.ajax').remove();\n\t\t\tupgradeStatusLoopWorker.$ajaxMessgesDiv.after(`<div class=\"ui error message ajax\">${globalTranslate.upd_DownloadUpgradeError}</div>`);\n\t\t\t$('i.loading.redo').addClass('download').removeClass('loading redo');\n\t\t}\n\t},\n};\n\n\nconst updatePBX = {\n\t$formObj: $('#upgrade-form'),\n\t$submitButton: $('#submitbutton'),\n\t$progressBar: $('#upload-progress-bar'),\n\t$ajaxMessgesDiv: $('#ajax-messages'),\n\tcurrentVersion: globalPBXVersion,\n\t$restoreModalForm: $('#update-modal-form'),\n\tupgradeInProgress: false,\n\tinitialize() {\n\t\tupdatePBX.$restoreModalForm.modal();\n\t\tupdatePBX.$submitButton.addClass('disabled');\n\t\t$('input:text, .ui.button', '.ui.action.input').on('click', (e) => {\n\t\t\t$('input:file', $(e.target).parents()).click();\n\t\t});\n\n\t\t$('input:file', '.ui.action.input').on('change', (e) => {\n\t\t\tif (e.target.files[0] !== undefined) {\n\t\t\t\tconst filename = e.target.files[0].name;\n\t\t\t\t$('input:text', $(e.target).parent()).val(filename);\n\t\t\t\tupdatePBX.$submitButton.removeClass('disabled');\n\t\t\t}\n\t\t});\n\t\tupdatePBX.$submitButton.on('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif (updatePBX.$submitButton.hasClass('loading') || updatePBX.upgradeInProgress) return;\n\n\t\t\tupdatePBX.$formObj\n\t\t\t\t.form({\n\t\t\t\t\ton: 'blur',\n\t\t\t\t\tfields: updatePBX.validateRules,\n\t\t\t\t\tonSuccess() {\n\t\t\t\t\t\tupdatePBX.$restoreModalForm\n\t\t\t\t\t\t\t.modal({\n\t\t\t\t\t\t\t\tclosable: false,\n\t\t\t\t\t\t\t\tonDeny: () => true,\n\t\t\t\t\t\t\t\tonApprove: () => {\n\t\t\t\t\t\t\t\t\tConfigWorker.stopConfigWorker();\n\t\t\t\t\t\t\t\t\tupdatePBX.$submitButton.addClass('loading');\n\t\t\t\t\t\t\t\t\tupdatePBX.upgradeInProgress = true;\n\t\t\t\t\t\t\t\t\tconst data = $('input:file')[0].files[0];\n\t\t\t\t\t\t\t\t\tPbxApi.SystemUpgrade(data, updatePBX.cbAfterUploadFile);\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.modal('show');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\tupdatePBX.$formObj.form('validate form');\n\t\t});\n\t\tconst requestData = {\n\t\t\tTYPE: 'FIRMWARE',\n\t\t\tLICENSE: globalPBXLicense,\n\t\t\tPBXVER: globalPBXVersion,\n\t\t\tLANGUAGE: globalPBXLanguage,\n\t\t};\n\t\t$.api({\n\t\t\turl: 'https://update.askozia.ru',\n\t\t\ton: 'now',\n\t\t\tmethod: 'POST',\n\t\t\tdata: requestData,\n\t\t\tsuccessTest(response) {\n\t\t\t\t// test whether a JSON response is valid\n\t\t\t\treturn response !== undefined\n\t\t\t\t\t&& Object.keys(response).length > 0\n\t\t\t\t\t&& response.result.toUpperCase() === 'SUCCESS';\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\tconst currentVerison = updatePBX.currentVersion.replace(/\\D/g, '');\n\t\t\t\tresponse.firmware.forEach((obj) => {\n\t\t\t\t\tconst version = obj.version.replace(/\\D/g, '');\n\t\t\t\t\tif (version > currentVerison) {\n\t\t\t\t\t\tupdatePBX.AddNewVersionInformation(obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$('a.download').on('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (updatePBX.$submitButton.hasClass('loading') || updatePBX.upgradeInProgress) return;\n\t\t\t\t\tupdatePBX.$restoreModalForm\n\t\t\t\t\t\t.modal({\n\t\t\t\t\t\t\tclosable: false,\n\t\t\t\t\t\t\tonDeny: () => true,\n\t\t\t\t\t\t\tonApprove: () => {\n\t\t\t\t\t\t\t\tConfigWorker.stopConfigWorker();\n\t\t\t\t\t\t\t\tconst params = [];\n\t\t\t\t\t\t\t\tconst $aLink = $(e.target).closest('a');\n\t\t\t\t\t\t\t\tparams.updateLink = $aLink.attr('href');\n\t\t\t\t\t\t\t\tparams.md5 = $aLink.attr('data-md5');\n\t\t\t\t\t\t\t\tparams.size = $aLink.attr('data-size');\n\t\t\t\t\t\t\t\t$aLink.find('i').addClass('loading redo').removeClass('download');\n\t\t\t\t\t\t\t\tupdatePBX.upgradeInProgress = true;\n\t\t\t\t\t\t\t\tPbxApi.SystemUpgradeOnline(params);\n\t\t\t\t\t\t\t\tupgradeStatusLoopWorker.initialize();\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.modal('show');\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t},\n\tcbAfterUploadFile(response) {\n\t\tif (response.length === 0 || response === false) {\n\t\t\tupdatePBX.$submitButton.removeClass('loading');\n\t\t\tupdatePBX.upgradeInProgress = false;\n\t\t\t$('.ui.message.ajax').remove();\n\t\t\tupdatePBX.$ajaxMessgesDiv.after(`<div class=\"ui error message ajax\">${globalTranslate.upd_UploadError}</div>`);\n\t\t} else if (response.function === 'upload_progress') {\n\t\t\tupdatePBX.$progressBar.progress({\n\t\t\t\tpercent: parseInt(response.percent, 10),\n\t\t\t});\n\t\t}\n\t},\n\tAddNewVersionInformation(obj) {\n\t\t$('#online-updates-block').show();\n\t\tconst dymanicRow = `\n\t\t\t<tr class=\"update-row\">\n\t\t\t<td class=\"center aligned\">${obj.version}</td>\n\t\t\t<td>${decodeURIComponent(obj.description)}</td>\n\t\t\t<td class=\"right aligned collapsing\">\n    \t\t<div class=\"ui small basic icon buttons action-buttons\">\n    \t\t\t<a href=\"${obj.href}\" class=\"ui button download\" \n\t\t\t\t\tdata-md5 =\"${obj.md5}\" data-size =\"${obj.size}\">\n\t\t\t\t\t<i class=\"icon download blue\"></i>\n\t\t\t\t\t<span class=\"percent\"></span>\n\t\t\t\t</a>\n    \t\t</div>   \n\t</tr>`;\n\t\t$('#updates-table tbody').append(dymanicRow);\n\t},\n};\n\n\n$(document).ready(() => {\n\tupdatePBX.initialize();\n});\n\n"],"file":"update-index.js"}