{"version":3,"sources":["../../src/Licensing/licensing-modify.js"],"names":["$","fn","form","settings","rules","checkEmptyIfLicenseKeyEmpty","value","val","length","licensingModify","$formObj","$licKey","$coupon","$email","$licenseDetailInfo","$resetButton","$productDetails","defaultLicenseKey","validateRules","companyname","identifier","type","prompt","globalTranslate","lic_ValidateCompanyNameEmpty","email","lic_ValidateContactEmail","contact","lic_ValidateContactName","licKey","optional","lic_ValidateLicenseKeyEmpty","coupon","depends","lic_ValidateCouponEmpty","initialize","accordion","hide","inputmask","onBeforePaste","cbOnCouponBeforePaste","oncomplete","cbOnLicenceKeyInputChange","onincomplete","clearIncomplete","cbOnLicenceKeyBeforePaste","api","url","globalRootUrl","method","beforeSend","addClass","onSuccess","response","removeClass","remove","success","window","location","reload","onFailure","after","initializeForm","html","show","on","successTest","undefined","Object","keys","lic_LicenseKeyValid","message","cbShowLicenseInfo","onError","errorMessage","element","xhr","status","find","each","index","obj","attr","empty","removeAttr","showLicenseInfo","pastedValue","indexOf","transition","replace","licenseData","JSON","parse","text","tel","products","product","Array","isArray","push","key","productValue","row","dateExpired","Date","expired","dateNow","name","lic_Expired","trial","expiredText","lic_ExpiredAfter","feature","featureValue","featureInfo","lic_FeatureInfo","count","counteach","captured","append","cbBeforeSendForm","result","data","cbAfterSendForm","localStorage","clear","Form","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 6 2018\n *\n */\n\n/* global globalRootUrl, globalTranslate, Form */\n\n\n$.fn.form.settings.rules.checkEmptyIfLicenseKeyEmpty = function (value) {\n\treturn ($('#licKey').val().length === 28 || value.length > 0);\n};\n\nconst licensingModify = {\n\t$formObj: $('#licencing-modify-form'),\n\t$licKey: $('#licKey'),\n\t$coupon: $('#coupon'),\n\t$email: $('#email'),\n\t$licenseDetailInfo: $('#licenseDetailInfo'),\n\t$resetButton: $('#reset-license'),\n\t$productDetails: $('#productDetails'),\n\tdefaultLicenseKey: null,\n\tvalidateRules: {\n\t\tcompanyname: {\n\t\t\tidentifier: 'companyname',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'checkEmptyIfLicenseKeyEmpty',\n\t\t\t\t\tprompt: globalTranslate.lic_ValidateCompanyNameEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\temail: {\n\t\t\tidentifier: 'email',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'checkEmptyIfLicenseKeyEmpty',\n\t\t\t\t\tprompt: globalTranslate.lic_ValidateContactEmail,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tcontact: {\n\t\t\tidentifier: 'contact',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'checkEmptyIfLicenseKeyEmpty',\n\t\t\t\t\tprompt: globalTranslate.lic_ValidateContactName,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tlicKey: {\n\t\t\tidentifier: 'licKey',\n\t\t\toptional: true,\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'exactLength[28]',\n\t\t\t\t\tprompt: globalTranslate.lic_ValidateLicenseKeyEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tcoupon: {\n\t\t\tdepends: 'licKey',\n\t\t\tidentifier: 'coupon',\n\t\t\toptional: true,\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'exactLength[31]',\n\t\t\t\t\tprompt: globalTranslate.lic_ValidateCouponEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\t$('.ui.accordion').accordion();\n\t\tlicensingModify.$licenseDetailInfo.hide();\n\t\tlicensingModify.$coupon.inputmask('MIKOUPD-*****-*****-*****-*****', {\n\t\t\tonBeforePaste: licensingModify.cbOnCouponBeforePaste,\n\t\t});\n\t\tlicensingModify.$licKey.inputmask('MIKO-*****-*****-*****-*****', {\n\t\t\toncomplete: licensingModify.cbOnLicenceKeyInputChange,\n\t\t\tonincomplete: licensingModify.cbOnLicenceKeyInputChange,\n\t\t\tclearIncomplete: true,\n\t\t\tonBeforePaste: licensingModify.cbOnLicenceKeyBeforePaste,\n\t\t});\n\t\tlicensingModify.$email.inputmask('email');\n\t\tlicensingModify.defaultLicenseKey = licensingModify.$licKey.val();\n\t\tlicensingModify.$resetButton.api({\n\t\t\turl: `${globalRootUrl}licensing/resetSettings`,\n\t\t\tmethod: 'GET',\n\t\t\tbeforeSend(settings) {\n\t\t\t\t$(this).addClass('loading disabled');\n\t\t\t\treturn settings;\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\t$(this).removeClass('loading disabled');\n\t\t\t\t$('.ui.message.ajax').remove();\n\t\t\t\tif (response.success) window.location.reload();\n\t\t\t},\n\t\t\tonFailure(response) {\n\t\t\t\t$(this).removeClass('loading disabled');\n\t\t\t\t$('form').after(response);\n\t\t\t},\n\t\t});\n\n\t\tlicensingModify.cbOnLicenceKeyInputChange();\n\t\tlicensingModify.initializeForm();\n\n\n\t\tif (licensingModify.defaultLicenseKey.length === 28) {\n\t\t\t$('#filled-license-key-info')\n\t\t\t\t.html(`${licensingModify.defaultLicenseKey} <i class=\"spinner loading icon\"></i>`)\n\t\t\t\t.show();\n\n\t\t\t//  Проверим доступность фичии\n\t\t\t$.api({\n\t\t\t\turl: `${globalRootUrl}licensing/getBaseFeatureStatus/${licensingModify.defaultLicenseKey}`,\n\t\t\t\ton: 'now',\n\t\t\t\tsuccessTest(response) {\n\t\t\t\t\t// test whether a JSON response is valid\n\t\t\t\t\treturn response !== undefined\n\t\t\t\t\t\t&& Object.keys(response).length > 0\n\t\t\t\t\t\t&& response.success === true;\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tlicensingModify.$formObj.removeClass('error').addClass('success');\n\t\t\t\t\t$('.ui.message.ajax').remove();\n\t\t\t\t\t$('#filled-license-key-info').after(`<div class=\"ui success message ajax\"><i class=\"check green icon\"></i> ${globalTranslate.lic_LicenseKeyValid}</div>`);\n\t\t\t\t\t$('.spinner.loading.icon').remove();\n\t\t\t\t},\n\t\t\t\tonFailure(response) {\n\t\t\t\t\tlicensingModify.$formObj.addClass('error').removeClass('success');\n\t\t\t\t\t$('.ui.message.ajax').remove();\n\t\t\t\t\t$('#filled-license-key-info').after(`<div class=\"ui error message ajax\"><i class=\"exclamation triangle red icon\"></i> ${response.message}</div>`);\n\t\t\t\t\t$('.spinner.loading.icon').remove();\n\t\t\t\t},\n\t\t\t});\n\n\n\t\t\t// Получим информациию о лицензии\n\t\t\t$.api({\n\t\t\t\turl: `${globalRootUrl}licensing/getLicenseInfo/${licensingModify.defaultLicenseKey}`,\n\t\t\t\ton: 'now',\n\t\t\t\tonSuccess(response) {\n\t\t\t\t\tlicensingModify.cbShowLicenseInfo(response);\n\t\t\t\t},\n\t\t\t\tonError(errorMessage, element, xhr) {\n\t\t\t\t\tif (xhr.status === 403) {\n\t\t\t\t\t\twindow.location = `${globalRootUrl}session/index`;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\t// PbxApi.CheckLicense(licensingModify.cbCheckLicenseKey);\n\t\t\t$('#empty-license-key-info').hide();\n\t\t} else {\n\t\t\t$('#filled-license-key-info').hide();\n\t\t\t$('#empty-license-key-info').show();\n\t\t}\n\t},\n\tcbOnLicenceKeyInputChange() {\n\t\tconst licKey = licensingModify.$licKey.val();\n\t\tif (licKey.length === 28) {\n\t\t\tlicensingModify.$formObj.find('.reginfo input').each((index, obj) => {\n\t\t\t\t$(obj).attr('hidden', '');\n\t\t\t});\n\t\t\t$('#getTrialLicenseSection').hide();\n\t\t\t$('#couponSection').show();\n\t\t\t$('#form-error-messages').empty();\n\t\t} else {\n\t\t\tlicensingModify.$formObj.find('.reginfo input').each((index, obj) => {\n\t\t\t\t$(obj).removeAttr('hidden');\n\t\t\t});\n\t\t\t$('#getTrialLicenseSection').show();\n\t\t\t$('#couponSection').hide();\n\t\t}\n\t},\n\tcbShowLicenseInfo(response) {\n\t\tif (response !== undefined && response.message !== 'null') {\n\t\t\tlicensingModify.showLicenseInfo(response.message);\n\t\t\tlicensingModify.$licenseDetailInfo.show();\n\t\t} else {\n\t\t\tlicensingModify.$licenseDetailInfo.hide();\n\t\t}\n\t},\n\t/**\n\t * Обработка вставки ключа из буффера обмена\n\t */\n\tcbOnLicenceKeyBeforePaste(pastedValue) {\n\t\tif (pastedValue.indexOf('MIKO-') === -1) {\n\t\t\tlicensingModify.$licKey.transition('shake');\n\t\t\treturn false;\n\t\t}\n\t\treturn pastedValue.replace(/\\s+/g, '');\n\t},\n\t/**\n\t * Обработка вставки купона из буффера обмена\n\t */\n\tcbOnCouponBeforePaste(pastedValue) {\n\t\tif (pastedValue.indexOf('MIKOUPD-') === -1) {\n\t\t\tlicensingModify.$coupon.transition('shake');\n\t\t\treturn false;\n\t\t}\n\t\treturn pastedValue.replace(/\\s+/g, '');\n\t},\n\t/**\n\t * Строит отображение информации о лицензировании ПП\n\t */\n\tshowLicenseInfo(message) {\n\t\tconst licenseData = JSON.parse(message);\n\t\tif (licenseData['@attributes'] === undefined) {\n\t\t\treturn;\n\t\t}\n\t\t$('#key-companyname').text(licenseData['@attributes'].companyname);\n\t\t$('#key-contact').text(licenseData['@attributes'].contact);\n\t\t$('#key-email').text(licenseData['@attributes'].email);\n\t\t$('#key-tel').text(licenseData['@attributes'].tel);\n\t\tlet products = licenseData.product;\n\t\tif (!Array.isArray(products)) {\n\t\t\tproducts = [];\n\t\t\tproducts.push(licenseData.product);\n\t\t}\n\t\t$.each(products, (key, productValue) => {\n\t\t\tlet row = '<tr><td>';\n\t\t\tlet product = productValue;\n\t\t\tif (product['@attributes'] !== undefined) {\n\t\t\t\tproduct = productValue['@attributes'];\n\t\t\t}\n\t\t\tconst dateExpired = new Date(product.expired.replace(/(\\d{4})-(\\d{2})-(\\d{2})/, '$1/$2/$3'));\n\t\t\tconst dateNow = new Date();\n\t\t\tif (dateNow > dateExpired) {\n\t\t\t\trow += `<div class=\"ui disabled segment\">${product.name}<br>\n\t\t\t\t<small>${globalTranslate.lic_Expired}</small>`;\n\t\t\t} else if (product.expired.length === 0 && product.trial === '1') {\n\t\t\t\trow += `<div class=\"ui disabled segment\">${product.name}<br>\n\t\t\t\t<small>${globalTranslate.lic_Expired}</small>`;\n\t\t\t} else {\n\t\t\t\trow += `<div class=\"ui positive message\">${product.name}`;\n\t\t\t\tif (product.expired.length > 0) {\n\t\t\t\t\tlet expiredText = globalTranslate.lic_ExpiredAfter;\n\t\t\t\t\texpiredText = expiredText.replace('%expired%', product.expired);\n\t\t\t\t\trow += `<br><small>${expiredText}</small>`;\n\t\t\t\t}\n\t\t\t\trow += '<br><span class=\"features\">';\n\t\t\t\t$.each(productValue.feature, (index, featureValue) => {\n\t\t\t\t\tlet featureInfo = globalTranslate.lic_FeatureInfo;\n\t\t\t\t\tlet feature = featureValue;\n\t\t\t\t\tif (featureValue['@attributes'] !== undefined) {\n\t\t\t\t\t\tfeature = featureValue['@attributes'];\n\t\t\t\t\t}\n\t\t\t\t\tfeatureInfo = featureInfo.replace('%name%', feature.name);\n\t\t\t\t\tfeatureInfo = featureInfo.replace('%count%', feature.count);\n\t\t\t\t\tfeatureInfo = featureInfo.replace('%counteach%', feature.counteach);\n\t\t\t\t\tfeatureInfo = featureInfo.replace('%captured%', feature.captured);\n\t\t\t\t\trow += `${featureInfo}<br>`;\n\t\t\t\t});\n\t\t\t\trow += '</span>';\n\t\t\t}\n\t\t\trow += '</div></td></tr>';\n\t\t\t$('#productDetails tbody').append(row);\n\t\t});\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = licensingModify.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm() {\n\t\tlicensingModify.defaultLicenseKey = licensingModify.$licKey.val();\n\t\tlocalStorage.clear('previousLicenseCheckResult');\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = licensingModify.$formObj;\n\t\tForm.url = `${globalRootUrl}licensing/updateLicense`;\n\t\tForm.validateRules = licensingModify.validateRules;\n\t\tForm.cbBeforeSendForm = licensingModify.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = licensingModify.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\tlicensingModify.initialize();\n});\n\n"],"file":"licensing-modify.js"}